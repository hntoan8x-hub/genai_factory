# configs/deployment/canary_config.yaml
# canary_config.yaml (Cho run_canary_rollout.py)
CANARY_ROLLOUT_CONFIG:
  # C√°c b∆∞·ªõc chuy·ªÉn ƒë·ªïi l∆∞u l∆∞·ª£ng (Ph·∫ßn trƒÉm l∆∞u l∆∞·ª£ng m·ªõi)
  traffic_steps: [5, 20, 50, 100]

  # Th·ªùi gian gi√°m s√°t gi·ªØa c√°c b∆∞·ªõc (Time-on-step)
  monitoring_duration_seconds: 180 # 3 ph√∫t gi√°m s√°t ·ªü m·ªói b∆∞·ªõc

  # Ng∆∞·ª°ng Th·∫•t b·∫°i M·ªÅm (Soft Failure Metrics)
  canary_quality_gates:
    max_5xx_rate: 0.005 # T·ª∑ l·ªá l·ªói d·ªãch v·ª• (5xx) t·ªëi ƒëa 0.5%
    max_safety_violations_per_minute: 2 # S·ªë l·∫ßn vi ph·∫°m an to√†n t·ªëi ƒëa (t·ª´ Log Store)
    max_cost_increase_percent: 0.15 # Chi ph√≠ LLM trung b√¨nh kh√¥ng ƒë∆∞·ª£c tƒÉng qu√° 15% so v·ªõi b·∫£n stable

  # C·∫•u h√¨nh Rollback (ƒë·ªÉ k√≠ch ho·∫°t Rollback Job n·∫øu th·∫•t b·∫°i)
  rollback_command: "python src/scripts/rollback_deployment.py"

  # üö® B·ªî SUNG: Key cho Traffic Controller (n·∫øu c√≥ nhi·ªÅu lo·∫°i h·∫° t·∫ßng)
  traffic_controller_type: "kubernetes_istio"
